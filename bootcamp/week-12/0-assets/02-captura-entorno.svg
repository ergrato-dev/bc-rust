<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
  <defs>
    <style>
      .title { font-family: 'Segoe UI', sans-serif; font-size: 24px; font-weight: bold; fill: #d4d4d4; }
      .subtitle { font-family: 'Segoe UI', sans-serif; font-size: 16px; fill: #808080; }
      .label { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #d4d4d4; }
      .small { font-family: 'Segoe UI', sans-serif; font-size: 12px; fill: #808080; }
      .code { font-family: 'Fira Code', 'Consolas', monospace; font-size: 11px; fill: #d4d4d4; }
      .keyword { fill: #569cd6; }
      .function { fill: #dcdcaa; }
      .string { fill: #ce9178; }
      .number { fill: #b5cea8; }
      .comment { fill: #6a9955; }
      .type { fill: #4ec9b0; }
      .operator { fill: #d4d4d4; }
    </style>
    <marker id="arrow-green" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#4ec9b0"/>
    </marker>
    <marker id="arrow-yellow" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#dcdcaa"/>
    </marker>
    <marker id="arrow-red" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#CE422B"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="#1e1e1e"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" class="title">üì¶ Modos de Captura del Entorno</text>
  <text x="400" y="55" text-anchor="middle" class="subtitle">C√≥mo los closures capturan variables</text>
  
  <!-- Mode 1: By Reference -->
  <rect x="20" y="75" width="250" height="175" rx="8" fill="#252526" stroke="#4ec9b0" stroke-width="2"/>
  <text x="145" y="98" text-anchor="middle" class="label" style="fill:#4ec9b0;">1. Por Referencia &amp;T</text>
  <text x="145" y="115" text-anchor="middle" class="small">Solo lectura ‚Ä¢ Trait Fn</text>
  
  <text x="35" y="140" class="code">
    <tspan class="keyword">let</tspan><tspan> x = </tspan><tspan class="number">10</tspan><tspan>;</tspan>
  </text>
  <text x="35" y="158" class="code">
    <tspan class="keyword">let</tspan><tspan> leer = </tspan><tspan class="operator">||</tspan><tspan> x + </tspan><tspan class="number">1</tspan><tspan>;</tspan>
  </text>
  <text x="35" y="180" class="code">
    <tspan class="function">leer</tspan><tspan>();</tspan><tspan class="comment"> // OK</tspan>
  </text>
  <text x="35" y="198" class="code">
    <tspan class="function">leer</tspan><tspan>();</tspan><tspan class="comment"> // OK m√∫ltiples veces</tspan>
  </text>
  <text x="35" y="220" class="code">
    <tspan class="function">println!</tspan><tspan>(</tspan><tspan class="string">"{}"</tspan><tspan>, x);</tspan><tspan class="comment"> // x disponible</tspan>
  </text>
  <text x="35" y="242" class="small" style="fill:#4ec9b0;">‚úì Variable sigue accesible</text>
  
  <!-- Mode 2: By Mutable Reference -->
  <rect x="275" y="75" width="250" height="175" rx="8" fill="#252526" stroke="#dcdcaa" stroke-width="2"/>
  <text x="400" y="98" text-anchor="middle" class="label" style="fill:#dcdcaa;">2. Ref Mutable &amp;mut T</text>
  <text x="400" y="115" text-anchor="middle" class="small">Modificar ‚Ä¢ Trait FnMut</text>
  
  <text x="290" y="140" class="code">
    <tspan class="keyword">let mut</tspan><tspan> count = </tspan><tspan class="number">0</tspan><tspan>;</tspan>
  </text>
  <text x="290" y="158" class="code">
    <tspan class="keyword">let mut</tspan><tspan> inc = </tspan><tspan class="operator">||</tspan><tspan> {</tspan>
  </text>
  <text x="305" y="176" class="code">count += <tspan class="number">1</tspan>;</text>
  <text x="290" y="194" class="code">};</text>
  <text x="290" y="216" class="code">
    <tspan class="function">inc</tspan><tspan>();</tspan><tspan class="comment"> // count = 1</tspan>
  </text>
  <text x="290" y="234" class="code">
    <tspan class="function">inc</tspan><tspan>();</tspan><tspan class="comment"> // count = 2</tspan>
  </text>
  
  <!-- Mode 3: By Value (move) -->
  <rect x="530" y="75" width="250" height="175" rx="8" fill="#252526" stroke="#CE422B" stroke-width="2"/>
  <text x="655" y="98" text-anchor="middle" class="label" style="fill:#CE422B;">3. Por Valor (move)</text>
  <text x="655" y="115" text-anchor="middle" class="small">Ownership ‚Ä¢ Trait FnOnce</text>
  
  <text x="545" y="140" class="code">
    <tspan class="keyword">let</tspan><tspan> s = </tspan><tspan class="type">String</tspan><tspan>::from(</tspan><tspan class="string">"hi"</tspan><tspan>);</tspan>
  </text>
  <text x="545" y="158" class="code">
    <tspan class="keyword">let</tspan><tspan> consume = </tspan><tspan class="keyword">move</tspan><tspan> </tspan><tspan class="operator">||</tspan><tspan> {</tspan>
  </text>
  <text x="560" y="176" class="code">
    <tspan class="function">drop</tspan><tspan>(s);</tspan>
  </text>
  <text x="545" y="194" class="code">};</text>
  <text x="545" y="216" class="code">
    <tspan class="function">consume</tspan><tspan>();</tspan><tspan class="comment"> // OK</tspan>
  </text>
  <text x="545" y="234" class="code">
    <tspan class="comment">// consume(); ‚Üê ERROR: ya consumido</tspan>
  </text>
  
  <!-- Visual indicators row -->
  <text x="145" y="270" text-anchor="middle" class="small" style="fill:#4ec9b0;">closure ‚Üí &amp;x</text>
  <text x="400" y="270" text-anchor="middle" class="small" style="fill:#dcdcaa;">closure ‚Üí &amp;mut count</text>
  <text x="655" y="270" text-anchor="middle" class="small" style="fill:#CE422B;">closure owns s</text>
  
  <!-- Decision Flow Title -->
  <text x="400" y="310" text-anchor="middle" class="label" style="fill:#d4d4d4;">¬øC√≥mo elige Rust el modo de captura?</text>
  <text x="400" y="328" text-anchor="middle" class="small">Autom√°ticamente usa el menos restrictivo</text>
  
  <!-- Flow diagram -->
  <rect x="100" y="345" width="600" height="240" rx="8" fill="#252526" stroke="#3c3c3c"/>
  
  <!-- Question node -->
  <ellipse cx="400" cy="380" rx="100" ry="22" fill="#2d2d2d" stroke="#d4d4d4"/>
  <text x="400" y="385" text-anchor="middle" class="small">¬øQu√© hace el closure con la variable?</text>
  
  <!-- Three branches -->
  <!-- Branch 1: Solo lee -->
  <rect x="130" y="430" width="140" height="40" rx="4" fill="#2d2d2d" stroke="#4ec9b0"/>
  <text x="200" y="455" text-anchor="middle" class="small" style="fill:#4ec9b0;">Solo lee el valor</text>
  <path d="M 320 400 L 200 425" stroke="#4ec9b0" stroke-width="1.5" fill="none"/>
  
  <!-- Branch 2: Modifica -->
  <rect x="330" y="430" width="140" height="40" rx="4" fill="#2d2d2d" stroke="#dcdcaa"/>
  <text x="400" y="455" text-anchor="middle" class="small" style="fill:#dcdcaa;">Modifica el valor</text>
  <path d="M 400 402 L 400 425" stroke="#dcdcaa" stroke-width="1.5" fill="none"/>
  
  <!-- Branch 3: Consume -->
  <rect x="530" y="430" width="140" height="40" rx="4" fill="#2d2d2d" stroke="#CE422B"/>
  <text x="600" y="455" text-anchor="middle" class="small" style="fill:#CE422B;">Consume/mueve</text>
  <path d="M 480 400 L 600 425" stroke="#CE422B" stroke-width="1.5" fill="none"/>
  
  <!-- Results -->
  <rect x="130" y="500" width="140" height="35" rx="4" fill="#1e3d32" stroke="#4ec9b0"/>
  <text x="200" y="522" text-anchor="middle" class="small" style="fill:#4ec9b0;">&amp;T ‚Üí impl Fn</text>
  <path d="M 200 470 L 200 495" stroke="#4ec9b0" stroke-width="1.5" fill="none" marker-end="url(#arrow-green)"/>
  
  <rect x="330" y="500" width="140" height="35" rx="4" fill="#3d3520" stroke="#dcdcaa"/>
  <text x="400" y="522" text-anchor="middle" class="small" style="fill:#dcdcaa;">&amp;mut T ‚Üí impl FnMut</text>
  <path d="M 400 470 L 400 495" stroke="#dcdcaa" stroke-width="1.5" fill="none" marker-end="url(#arrow-yellow)"/>
  
  <rect x="530" y="500" width="140" height="35" rx="4" fill="#3d2020" stroke="#CE422B"/>
  <text x="600" y="522" text-anchor="middle" class="small" style="fill:#CE422B;">T ‚Üí impl FnOnce</text>
  <path d="M 600 470 L 600 495" stroke="#CE422B" stroke-width="1.5" fill="none" marker-end="url(#arrow-red)"/>
  
  <!-- Footer note -->
  <text x="400" y="570" text-anchor="middle" class="small">üí° Usa <tspan style="fill:#569cd6;">move</tspan> para forzar captura por valor</text>
</svg>
