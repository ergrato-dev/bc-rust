<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550">
  <defs>
    <style>
      .title { font-family: 'Segoe UI', sans-serif; font-size: 24px; font-weight: bold; fill: #d4d4d4; }
      .subtitle { font-family: 'Segoe UI', sans-serif; font-size: 16px; fill: #808080; }
      .label { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #d4d4d4; }
      .small { font-family: 'Segoe UI', sans-serif; font-size: 12px; fill: #808080; }
      .code { font-family: 'Fira Code', 'Consolas', monospace; font-size: 12px; fill: #d4d4d4; }
      .keyword { fill: #569cd6; }
      .function { fill: #dcdcaa; }
      .string { fill: #ce9178; }
      .number { fill: #b5cea8; }
      .comment { fill: #6a9955; }
      .type { fill: #4ec9b0; }
      .operator { fill: #d4d4d4; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="#1e1e1e"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" class="title">ðŸ“¦ Modos de Captura del Entorno</text>
  <text x="400" y="58" text-anchor="middle" class="subtitle">CÃ³mo los closures capturan variables</text>
  
  <!-- Mode 1: By Reference -->
  <rect x="30" y="80" width="240" height="200" rx="8" fill="#252526" stroke="#4ec9b0" stroke-width="2"/>
  <text x="150" y="105" text-anchor="middle" class="label" style="fill:#4ec9b0;">1. Por Referencia &amp;T</text>
  <text x="150" y="125" text-anchor="middle" class="small">Solo lectura â€¢ Trait Fn</text>
  
  <text x="45" y="155" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> x = </tspan>
    <tspan class="number">10</tspan>
    <tspan>;</tspan>
  </text>
  <text x="45" y="175" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> leer = </tspan>
    <tspan class="operator">||</tspan>
    <tspan> x + </tspan>
    <tspan class="number">1</tspan>
    <tspan>;</tspan>
  </text>
  <text x="45" y="205" class="code">
    <tspan class="function">leer</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // OK</tspan>
  </text>
  <text x="45" y="225" class="code">
    <tspan class="function">leer</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // OK</tspan>
  </text>
  <text x="45" y="255" class="code">
    <tspan class="function">println!</tspan>
    <tspan>(</tspan>
    <tspan class="string">"{}"</tspan>
    <tspan>, x);</tspan>
    <tspan class="comment"> // OK</tspan>
  </text>
  
  <!-- Diagram for mode 1 -->
  <rect x="180" y="150" width="70" height="30" rx="4" fill="#2d2d2d" stroke="#4ec9b0"/>
  <text x="215" y="170" text-anchor="middle" class="small" style="fill:#4ec9b0;">x = 10</text>
  <path d="M 140 170 L 175 170" stroke="#4ec9b0" stroke-width="2" marker-end="url(#arrow-green)"/>
  
  <!-- Mode 2: By Mutable Reference -->
  <rect x="280" y="80" width="240" height="200" rx="8" fill="#252526" stroke="#dcdcaa" stroke-width="2"/>
  <text x="400" y="105" text-anchor="middle" class="label" style="fill:#dcdcaa;">2. Por Ref Mutable &amp;mut T</text>
  <text x="400" y="125" text-anchor="middle" class="small">Modificar â€¢ Trait FnMut</text>
  
  <text x="295" y="155" class="code">
    <tspan class="keyword">let mut</tspan>
    <tspan> count = </tspan>
    <tspan class="number">0</tspan>
    <tspan>;</tspan>
  </text>
  <text x="295" y="175" class="code">
    <tspan class="keyword">let mut</tspan>
    <tspan> inc = </tspan>
    <tspan class="operator">||</tspan>
    <tspan> {</tspan>
  </text>
  <text x="310" y="195" class="code">count += <tspan class="number">1</tspan>;</text>
  <text x="295" y="215" class="code">};</text>
  <text x="295" y="245" class="code">
    <tspan class="function">inc</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // count = 1</tspan>
  </text>
  <text x="295" y="265" class="code">
    <tspan class="function">inc</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // count = 2</tspan>
  </text>
  
  <!-- Diagram for mode 2 -->
  <rect x="430" y="150" width="70" height="30" rx="4" fill="#2d2d2d" stroke="#dcdcaa"/>
  <text x="465" y="170" text-anchor="middle" class="small" style="fill:#dcdcaa;">count</text>
  <path d="M 390 170 L 425 170" stroke="#dcdcaa" stroke-width="2" stroke-dasharray="4,2" marker-end="url(#arrow-yellow)"/>
  
  <!-- Mode 3: By Value (move) -->
  <rect x="530" y="80" width="240" height="200" rx="8" fill="#252526" stroke="#CE422B" stroke-width="2"/>
  <text x="650" y="105" text-anchor="middle" class="label" style="fill:#CE422B;">3. Por Valor (move)</text>
  <text x="650" y="125" text-anchor="middle" class="small">Ownership â€¢ Trait FnOnce</text>
  
  <text x="545" y="155" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> s = </tspan>
    <tspan class="type">String</tspan>
    <tspan>::from(</tspan>
    <tspan class="string">"hi"</tspan>
    <tspan>);</tspan>
  </text>
  <text x="545" y="175" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> consume = </tspan>
    <tspan class="keyword">move</tspan>
    <tspan> </tspan>
    <tspan class="operator">||</tspan>
    <tspan> {</tspan>
  </text>
  <text x="560" y="195" class="code">
    <tspan class="function">drop</tspan>
    <tspan>(s);</tspan>
  </text>
  <text x="545" y="215" class="code">};</text>
  <text x="545" y="245" class="code">
    <tspan class="function">consume</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // OK</tspan>
  </text>
  <text x="545" y="265" class="code">
    <tspan class="comment">// s ya no existe</tspan>
  </text>
  
  <!-- Diagram for mode 3 -->
  <rect x="680" y="150" width="70" height="30" rx="4" fill="#2d2d2d" stroke="#CE422B"/>
  <text x="715" y="170" text-anchor="middle" class="small" style="fill:#CE422B;">s</text>
  <path d="M 640 170 L 675 170" stroke="#CE422B" stroke-width="2" marker-end="url(#arrow-red)"/>
  <text x="715" y="200" text-anchor="middle" class="small" style="fill:#CE422B;">â†’ moved</text>
  
  <!-- Decision Flow -->
  <text x="400" y="310" text-anchor="middle" class="label" style="fill:#808080;">Rust elige automÃ¡ticamente el modo menos restrictivo</text>
  
  <!-- Flow diagram -->
  <rect x="250" y="330" width="300" height="190" rx="8" fill="#252526" stroke="#3c3c3c"/>
  
  <!-- Decision nodes -->
  <ellipse cx="400" cy="360" rx="80" ry="20" fill="#2d2d2d" stroke="#d4d4d4"/>
  <text x="400" y="365" text-anchor="middle" class="small">Â¿El closure...?</text>
  
  <rect x="280" y="400" width="100" height="35" rx="4" fill="#2d2d2d" stroke="#4ec9b0"/>
  <text x="330" y="422" text-anchor="middle" class="small" style="fill:#4ec9b0;">Solo lee</text>
  
  <rect x="400" y="400" width="100" height="35" rx="4" fill="#2d2d2d" stroke="#dcdcaa"/>
  <text x="450" y="422" text-anchor="middle" class="small" style="fill:#dcdcaa;">Modifica</text>
  
  <rect x="340" y="460" width="120" height="35" rx="4" fill="#2d2d2d" stroke="#CE422B"/>
  <text x="400" y="482" text-anchor="middle" class="small" style="fill:#CE422B;">Consume/mueve</text>
  
  <!-- Arrows -->
  <path d="M 360 380 L 330 395" stroke="#4ec9b0" stroke-width="1.5" fill="none"/>
  <path d="M 440 380 L 450 395" stroke="#dcdcaa" stroke-width="1.5" fill="none"/>
  <path d="M 400 380 L 400 455" stroke="#CE422B" stroke-width="1.5" fill="none"/>
  
  <!-- Results -->
  <text x="330" y="500" text-anchor="middle" class="small" style="fill:#4ec9b0;">&amp;T â†’ Fn</text>
  <text x="450" y="450" text-anchor="middle" class="small" style="fill:#dcdcaa;">&amp;mut T â†’ FnMut</text>
  <text x="400" y="510" text-anchor="middle" class="small" style="fill:#CE422B;">T â†’ FnOnce</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrow-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#4ec9b0"/>
    </marker>
    <marker id="arrow-yellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#dcdcaa"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#CE422B"/>
    </marker>
  </defs>
</svg>
