<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 520">
  <defs>
    <style>
      .title { font-family: 'Segoe UI', sans-serif; font-size: 24px; font-weight: bold; fill: #d4d4d4; }
      .subtitle { font-family: 'Segoe UI', sans-serif; font-size: 16px; fill: #808080; }
      .label { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #d4d4d4; }
      .small { font-family: 'Segoe UI', sans-serif; font-size: 12px; fill: #808080; }
      .code { font-family: 'Fira Code', 'Consolas', monospace; font-size: 11px; fill: #d4d4d4; }
      .keyword { fill: #569cd6; }
      .function { fill: #dcdcaa; }
      .string { fill: #ce9178; }
      .number { fill: #b5cea8; }
      .comment { fill: #6a9955; }
      .type { fill: #4ec9b0; }
      .trait { fill: #b8d7a3; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="#1e1e1e"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" class="title">⚙️ Los Traits Fn</text>
  <text x="400" y="58" text-anchor="middle" class="subtitle">Jerarquía de traits para closures</text>
  
  <!-- Hierarchy Diagram -->
  <text x="400" y="90" text-anchor="middle" class="label" style="fill:#CE422B;">Jerarquía de Traits</text>
  
  <!-- FnOnce (top) -->
  <rect x="300" y="105" width="200" height="50" rx="8" fill="#CE422B" fill-opacity="0.2" stroke="#CE422B" stroke-width="2"/>
  <text x="400" y="130" text-anchor="middle" class="label" style="fill:#CE422B; font-weight:bold;">FnOnce</text>
  <text x="400" y="147" text-anchor="middle" class="small">call_once(self)</text>
  
  <!-- Arrow -->
  <path d="M 400 155 L 400 175" stroke="#808080" stroke-width="2"/>
  <polygon points="400,180 395,172 405,172" fill="#808080"/>
  
  <!-- FnMut (middle) -->
  <rect x="300" y="185" width="200" height="50" rx="8" fill="#dcdcaa" fill-opacity="0.2" stroke="#dcdcaa" stroke-width="2"/>
  <text x="400" y="210" text-anchor="middle" class="label" style="fill:#dcdcaa; font-weight:bold;">FnMut</text>
  <text x="400" y="227" text-anchor="middle" class="small">call_mut(&amp;mut self)</text>
  
  <!-- Arrow -->
  <path d="M 400 235 L 400 255" stroke="#808080" stroke-width="2"/>
  <polygon points="400,260 395,252 405,252" fill="#808080"/>
  
  <!-- Fn (bottom) -->
  <rect x="300" y="265" width="200" height="50" rx="8" fill="#4ec9b0" fill-opacity="0.2" stroke="#4ec9b0" stroke-width="2"/>
  <text x="400" y="290" text-anchor="middle" class="label" style="fill:#4ec9b0; font-weight:bold;">Fn</text>
  <text x="400" y="307" text-anchor="middle" class="small">call(&amp;self)</text>
  
  <!-- Annotations -->
  <text x="520" y="130" class="small">Todos los closures</text>
  <text x="520" y="210" class="small">Closures que no consumen</text>
  <text x="520" y="290" class="small">Closures que solo leen</text>
  
  <!-- Left side: implications -->
  <text x="285" y="170" text-anchor="end" class="small" style="fill:#4ec9b0;">Fn ⊂ FnMut ⊂ FnOnce</text>
  
  <!-- Three columns with examples -->
  <rect x="30" y="340" width="240" height="160" rx="8" fill="#252526" stroke="#4ec9b0"/>
  <text x="150" y="365" text-anchor="middle" class="label" style="fill:#4ec9b0;">Fn (solo lee)</text>
  
  <text x="45" y="390" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> x = </tspan>
    <tspan class="number">5</tspan>
    <tspan>;</tspan>
  </text>
  <text x="45" y="410" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> leer = </tspan>
    <tspan class="operator">||</tspan>
    <tspan> x + </tspan>
    <tspan class="number">1</tspan>
    <tspan>;</tspan>
  </text>
  <text x="45" y="440" class="code">
    <tspan class="comment">// Puede llamarse ∞ veces</tspan>
  </text>
  <text x="45" y="460" class="code">
    <tspan class="function">leer</tspan>
    <tspan>(); </tspan>
    <tspan class="function">leer</tspan>
    <tspan>(); </tspan>
    <tspan class="function">leer</tspan>
    <tspan>();</tspan>
  </text>
  <text x="45" y="485" class="code">
    <tspan class="comment">// x sigue disponible ✓</tspan>
  </text>
  
  <rect x="280" y="340" width="240" height="160" rx="8" fill="#252526" stroke="#dcdcaa"/>
  <text x="400" y="365" text-anchor="middle" class="label" style="fill:#dcdcaa;">FnMut (modifica)</text>
  
  <text x="295" y="390" class="code">
    <tspan class="keyword">let mut</tspan>
    <tspan> count = </tspan>
    <tspan class="number">0</tspan>
    <tspan>;</tspan>
  </text>
  <text x="295" y="410" class="code">
    <tspan class="keyword">let mut</tspan>
    <tspan> inc = </tspan>
    <tspan class="operator">||</tspan>
    <tspan> count += </tspan>
    <tspan class="number">1</tspan>
    <tspan>;</tspan>
  </text>
  <text x="295" y="440" class="code">
    <tspan class="comment">// Puede llamarse ∞ veces</tspan>
  </text>
  <text x="295" y="460" class="code">
    <tspan class="function">inc</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // count = 1</tspan>
  </text>
  <text x="295" y="480" class="code">
    <tspan class="function">inc</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // count = 2</tspan>
  </text>
  
  <rect x="530" y="340" width="240" height="160" rx="8" fill="#252526" stroke="#CE422B"/>
  <text x="650" y="365" text-anchor="middle" class="label" style="fill:#CE422B;">FnOnce (consume)</text>
  
  <text x="545" y="390" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> s = </tspan>
    <tspan class="string">"hello"</tspan>
    <tspan>.to_string();</tspan>
  </text>
  <text x="545" y="410" class="code">
    <tspan class="keyword">let</tspan>
    <tspan> consume = </tspan>
    <tspan class="operator">||</tspan>
    <tspan> </tspan>
    <tspan class="function">drop</tspan>
    <tspan>(s);</tspan>
  </text>
  <text x="545" y="440" class="code">
    <tspan class="comment">// Solo puede llamarse 1 vez</tspan>
  </text>
  <text x="545" y="460" class="code">
    <tspan class="function">consume</tspan>
    <tspan>();</tspan>
    <tspan class="comment"> // OK</tspan>
  </text>
  <text x="545" y="480" class="code">
    <tspan class="comment">// consume(); ← ERROR ✗</tspan>
  </text>
</svg>
