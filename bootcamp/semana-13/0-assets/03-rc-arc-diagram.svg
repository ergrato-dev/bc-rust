<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 550">
  <style>
    .title { font-family: 'Segoe UI', sans-serif; font-size: 22px; font-weight: bold; fill: #d4d4d4; }
    .subtitle { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #808080; }
    .label { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #d4d4d4; }
    .small { font-family: 'Segoe UI', sans-serif; font-size: 12px; fill: #808080; }
    .code { font-family: 'Fira Code', monospace; font-size: 11px; fill: #d4d4d4; }
    .type { font-family: 'Fira Code', monospace; font-size: 12px; fill: #4ec9b0; }
    .number { font-family: 'Fira Code', monospace; font-size: 14px; font-weight: bold; fill: #b5cea8; }
  </style>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="#1e1e1e"/>
  
  <!-- Title -->
  <text x="450" y="35" text-anchor="middle" class="title">Rc&lt;T&gt; y Arc&lt;T&gt; - Conteo de Referencias</text>
  <text x="450" y="55" text-anchor="middle" class="subtitle">Múltiples dueños del mismo dato</text>
  
  <!-- Rc Structure -->
  <rect x="30" y="75" width="400" height="220" rx="8" fill="#252526" stroke="#3c3c3c"/>
  <text x="230" y="100" text-anchor="middle" class="label" style="font-weight: bold;">Rc&lt;T&gt; - Reference Counting</text>
  
  <!-- Rc pointers -->
  <rect x="50" y="120" width="80" height="40" rx="4" fill="#2d2d2d" stroke="#569cd6"/>
  <text x="90" y="145" text-anchor="middle" class="type">Rc&lt;T&gt;</text>
  
  <rect x="50" y="175" width="80" height="40" rx="4" fill="#2d2d2d" stroke="#569cd6"/>
  <text x="90" y="200" text-anchor="middle" class="type">Rc&lt;T&gt;</text>
  
  <rect x="50" y="230" width="80" height="40" rx="4" fill="#2d2d2d" stroke="#569cd6"/>
  <text x="90" y="255" text-anchor="middle" class="type">Rc&lt;T&gt;</text>
  
  <!-- Arrows to shared data -->
  <line x1="130" y1="140" x2="220" y2="180" stroke="#CE422B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  <line x1="130" y1="195" x2="220" y2="195" stroke="#CE422B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  <line x1="130" y1="250" x2="220" y2="210" stroke="#CE422B" stroke-width="2" marker-end="url(#arrowhead3)"/>
  
  <!-- Shared Data Block -->
  <rect x="230" y="130" width="180" height="130" rx="8" fill="#2d2d2d" stroke="#CE422B" stroke-width="2"/>
  <text x="320" y="155" text-anchor="middle" class="small">strong_count:</text>
  <text x="320" y="175" text-anchor="middle" class="number">3</text>
  <line x1="250" y1="185" x2="390" y2="185" stroke="#3c3c3c"/>
  <text x="320" y="205" text-anchor="middle" class="small">weak_count:</text>
  <text x="320" y="225" text-anchor="middle" class="number">0</text>
  <line x1="250" y1="235" x2="390" y2="235" stroke="#3c3c3c"/>
  <text x="320" y="252" text-anchor="middle" class="type">data: T</text>
  
  <!-- Rc vs Arc -->
  <rect x="470" y="75" width="400" height="220" rx="8" fill="#252526" stroke="#3c3c3c"/>
  <text x="670" y="100" text-anchor="middle" class="label" style="font-weight: bold;">Rc vs Arc</text>
  
  <!-- Rc -->
  <rect x="490" y="120" width="170" height="80" rx="4" fill="#2d2d2d" stroke="#569cd6"/>
  <text x="575" y="145" text-anchor="middle" class="type">Rc&lt;T&gt;</text>
  <text x="575" y="165" text-anchor="middle" class="small">Single-thread only</text>
  <text x="575" y="185" text-anchor="middle" class="small" style="fill: #4ec9b0;">✓ Más rápido</text>
  
  <!-- Arc -->
  <rect x="680" y="120" width="170" height="80" rx="4" fill="#2d2d2d" stroke="#dcdcaa"/>
  <text x="765" y="145" text-anchor="middle" class="type">Arc&lt;T&gt;</text>
  <text x="765" y="165" text-anchor="middle" class="small">Multi-thread safe</text>
  <text x="765" y="185" text-anchor="middle" class="small" style="fill: #dcdcaa;">✓ Send + Sync</text>
  
  <!-- Thread illustration -->
  <g transform="translate(490, 210)">
    <rect x="0" y="0" width="80" height="30" rx="4" fill="#3c3c3c" stroke="#f44747"/>
    <text x="40" y="20" text-anchor="middle" class="small" style="fill: #f44747;">Thread 1</text>
    <text x="100" y="20" class="small">❌ Rc</text>
  </g>
  
  <g transform="translate(680, 210)">
    <rect x="0" y="0" width="80" height="30" rx="4" fill="#3c3c3c" stroke="#4ec9b0"/>
    <text x="40" y="20" text-anchor="middle" class="small" style="fill: #4ec9b0;">Thread 1</text>
    <rect x="90" y="0" width="80" height="30" rx="4" fill="#3c3c3c" stroke="#4ec9b0"/>
    <text x="130" y="20" text-anchor="middle" class="small" style="fill: #4ec9b0;">Thread 2</text>
  </g>
  
  <text x="575" y="265" text-anchor="middle" class="code">Rc no es Send</text>
  <text x="765" y="265" text-anchor="middle" class="code">Arc es Send + Sync</text>
  
  <!-- Weak Section -->
  <rect x="30" y="315" width="400" height="160" rx="8" fill="#252526" stroke="#3c3c3c"/>
  <text x="230" y="340" text-anchor="middle" class="label" style="font-weight: bold;">Weak&lt;T&gt; - Evitar Ciclos</text>
  
  <!-- Cycle Problem -->
  <g transform="translate(50, 355)">
    <rect x="0" y="0" width="60" height="35" rx="4" fill="#3c3c3c" stroke="#f44747"/>
    <text x="30" y="22" text-anchor="middle" class="small">A</text>
    
    <rect x="120" y="0" width="60" height="35" rx="4" fill="#3c3c3c" stroke="#f44747"/>
    <text x="150" y="22" text-anchor="middle" class="small">B</text>
    
    <path d="M 60 12 Q 90 -10 120 12" stroke="#f44747" stroke-width="2" fill="none" marker-end="url(#arrowhead3)"/>
    <path d="M 120 23 Q 90 45 60 23" stroke="#f44747" stroke-width="2" fill="none" marker-end="url(#arrowhead3)"/>
    
    <text x="90" y="65" text-anchor="middle" class="small" style="fill: #f44747;">❌ Ciclo: nunca se libera</text>
  </g>
  
  <!-- Solution with Weak -->
  <g transform="translate(230, 355)">
    <rect x="0" y="0" width="60" height="35" rx="4" fill="#3c3c3c" stroke="#4ec9b0"/>
    <text x="30" y="22" text-anchor="middle" class="small">A</text>
    
    <rect x="120" y="0" width="60" height="35" rx="4" fill="#3c3c3c" stroke="#4ec9b0"/>
    <text x="150" y="22" text-anchor="middle" class="small">B</text>
    
    <path d="M 60 12 Q 90 -10 120 12" stroke="#4ec9b0" stroke-width="2" fill="none" marker-end="url(#arrowhead3)"/>
    <text x="90" y="-5" text-anchor="middle" class="small" style="fill: #4ec9b0;">Rc</text>
    
    <path d="M 120 23 Q 90 45 60 23" stroke="#808080" stroke-width="2" stroke-dasharray="4" fill="none" marker-end="url(#arrowhead3)"/>
    <text x="90" y="55" text-anchor="middle" class="small" style="fill: #808080;">Weak</text>
    
    <text x="90" y="85" text-anchor="middle" class="small" style="fill: #4ec9b0;">✓ Weak no previene drop</text>
  </g>
  
  <!-- Clone semantics -->
  <rect x="470" y="315" width="400" height="160" rx="8" fill="#252526" stroke="#3c3c3c"/>
  <text x="670" y="340" text-anchor="middle" class="label" style="font-weight: bold;">Rc::clone vs .clone()</text>
  
  <text x="490" y="370" class="code">let a = Rc::new(String::from("hello"));</text>
  
  <rect x="490" y="385" width="360" height="35" rx="4" fill="#2d2d2d" stroke="#4ec9b0"/>
  <text x="500" y="405" class="code">let b = Rc::clone(&amp;a);</text>
  <text x="720" y="405" class="small" style="fill: #4ec9b0;">// O(1) - incrementa contador</text>
  
  <rect x="490" y="430" width="360" height="35" rx="4" fill="#2d2d2d" stroke="#dcdcaa"/>
  <text x="500" y="450" class="code">let c = (*a).clone();</text>
  <text x="720" y="450" class="small" style="fill: #dcdcaa;">// O(n) - clona el String</text>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#CE422B"/>
    </marker>
  </defs>
</svg>
