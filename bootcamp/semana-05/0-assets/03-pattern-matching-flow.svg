<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 520">
  <style>
    .title { font-family: 'Segoe UI', sans-serif; font-size: 22px; font-weight: 600; fill: #d4d4d4; }
    .subtitle { font-family: 'Segoe UI', sans-serif; font-size: 13px; fill: #808080; }
    .code { font-family: 'Fira Code', 'JetBrains Mono', monospace; font-size: 12px; fill: #d4d4d4; }
    .keyword { fill: #569cd6; }
    .type { fill: #4ec9b0; }
    .variant { fill: #dcdcaa; }
    .string { fill: #ce9178; }
    .number { fill: #b5cea8; }
    .comment { fill: #6a9955; }
    .label { font-family: 'Segoe UI', sans-serif; font-size: 11px; fill: #808080; }
    .box { fill: #252526; stroke: #3c3c3c; stroke-width: 1; rx: 6; }
    .arrow { stroke: #CE422B; stroke-width: 2; fill: none; }
    .match-arm { fill: #2d2d2d; stroke: #569cd6; stroke-width: 1; }
  </style>
  
  <rect width="100%" height="100%" fill="#1e1e1e"/>
  
  <!-- Título -->
  <text x="400" y="30" text-anchor="middle" class="title">Flujo de Pattern Matching</text>
  <text x="400" y="50" text-anchor="middle" class="subtitle">Comparación exhaustiva de variantes</text>
  
  <!-- Valor de entrada -->
  <rect x="30" y="80" width="180" height="60" rx="8" fill="#CE422B"/>
  <text x="120" y="105" text-anchor="middle" class="label" fill="#fff">Valor a evaluar</text>
  <text x="120" y="128" text-anchor="middle" class="code" fill="#fff">figura: Figura</text>
  
  <!-- Flecha principal -->
  <path d="M 210 110 L 280 110" class="arrow" marker-end="url(#arrowhead)"/>
  
  <!-- Match expression -->
  <rect x="280" y="70" width="200" height="80" class="box" stroke="#569cd6"/>
  <text x="290" y="98" class="code"><tspan class="keyword">match</tspan> figura {</text>
  <text x="290" y="118" class="code">    ...</text>
  <text x="290" y="138" class="code">}</text>
  
  <!-- Flechas a los brazos -->
  <path d="M 480 90 L 530 90 L 530 150" class="arrow"/>
  <path d="M 480 110 L 580 110 L 580 260" class="arrow"/>
  <path d="M 480 130 L 630 130 L 630 370" class="arrow"/>
  
  <!-- Brazo 1: Círculo -->
  <g transform="translate(460, 150)">
    <rect x="0" y="0" width="320" height="85" rx="6" class="match-arm"/>
    <text x="10" y="25" class="code"><tspan class="type">Figura</tspan>::<tspan class="variant">Circulo</tspan>(radio) =></text>
    <text x="10" y="50" class="code">    PI * radio * radio</text>
    
    <!-- Binding illustration -->
    <rect x="180" y="60" width="130" height="20" rx="4" fill="#1e1e1e" stroke="#CE422B"/>
    <text x="245" y="75" text-anchor="middle" class="label" fill="#CE422B">radio = 5.0</text>
  </g>
  
  <!-- Brazo 2: Rectángulo -->
  <g transform="translate(460, 260)">
    <rect x="0" y="0" width="320" height="85" rx="6" class="match-arm"/>
    <text x="10" y="25" class="code"><tspan class="type">Figura</tspan>::<tspan class="variant">Rect</tspan> { ancho, alto } =></text>
    <text x="10" y="50" class="code">    ancho * alto</text>
    
    <!-- Binding illustration -->
    <rect x="130" y="58" width="80" height="22" rx="4" fill="#1e1e1e" stroke="#CE422B"/>
    <text x="170" y="73" text-anchor="middle" class="label" fill="#CE422B">ancho = 10</text>
    <rect x="220" y="58" width="80" height="22" rx="4" fill="#1e1e1e" stroke="#CE422B"/>
    <text x="260" y="73" text-anchor="middle" class="label" fill="#CE422B">alto = 5</text>
  </g>
  
  <!-- Brazo 3: Wildcard -->
  <g transform="translate(460, 370)">
    <rect x="0" y="0" width="320" height="55" rx="6" class="match-arm" stroke="#6a9955"/>
    <text x="10" y="25" class="code">_ =></text>
    <text x="10" y="45" class="code">    <tspan class="number">0.0</tspan></text>
    
    <text x="100" y="25" class="comment">// cualquier otra</text>
  </g>
  
  <!-- Resultado -->
  <g transform="translate(460, 450)">
    <rect x="0" y="0" width="180" height="50" rx="8" fill="#16a34a"/>
    <text x="90" y="22" text-anchor="middle" class="label" fill="#fff">Resultado</text>
    <text x="90" y="42" text-anchor="middle" class="code" fill="#fff">f64</text>
  </g>
  
  <!-- Flechas de retorno -->
  <path d="M 620 235 L 720 235 L 720 475 L 650 475" class="arrow" stroke="#16a34a"/>
  <path d="M 620 345 L 740 345 L 740 475 L 650 475" class="arrow" stroke="#16a34a"/>
  <path d="M 620 420 L 650 420 L 650 450" class="arrow" stroke="#16a34a"/>
  
  <!-- Sección de patrones -->
  <rect x="30" y="170" width="400" height="310" class="box"/>
  <text x="50" y="200" class="title" style="font-size: 14px;">Tipos de Patrones</text>
  
  <text x="50" y="235" class="code"><tspan class="number">42</tspan>              <tspan class="comment">// Literal</tspan></text>
  <text x="50" y="260" class="code">x               <tspan class="comment">// Variable (captura)</tspan></text>
  <text x="50" y="285" class="code">_               <tspan class="comment">// Wildcard (ignora)</tspan></text>
  <text x="50" y="310" class="code"><tspan class="number">1</tspan>..=<tspan class="number">10</tspan>          <tspan class="comment">// Rango</tspan></text>
  <text x="50" y="335" class="code">A | B           <tspan class="comment">// OR (múltiples)</tspan></text>
  <text x="50" y="360" class="code">x <tspan class="keyword">if</tspan> x > <tspan class="number">0</tspan>     <tspan class="comment">// Guard (condición)</tspan></text>
  <text x="50" y="385" class="code">x @ <tspan class="number">1</tspan>..=<tspan class="number">10</tspan>      <tspan class="comment">// Binding + patrón</tspan></text>
  <text x="50" y="410" class="code">(a, b)          <tspan class="comment">// Tuple destructure</tspan></text>
  <text x="50" y="435" class="code">Point { x, y }  <tspan class="comment">// Struct destructure</tspan></text>
  <text x="50" y="460" class="code">..              <tspan class="comment">// Ignorar resto</tspan></text>
  
  <!-- Arrowhead marker -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#CE422B"/>
    </marker>
  </defs>
</svg>
