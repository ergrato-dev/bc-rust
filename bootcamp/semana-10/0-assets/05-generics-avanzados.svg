<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 580">
  <defs>
    <style>
      .title { font-family: 'Segoe UI', sans-serif; font-size: 22px; fill: #d4d4d4; font-weight: bold; }
      .subtitle { font-family: 'Segoe UI', sans-serif; font-size: 14px; fill: #CE422B; font-weight: bold; }
      .label { font-family: 'Segoe UI', sans-serif; font-size: 13px; fill: #d4d4d4; }
      .small { font-family: 'Segoe UI', sans-serif; font-size: 11px; fill: #808080; }
      .code { font-family: 'Fira Code', monospace; font-size: 11px; fill: #d4d4d4; }
      .keyword { fill: #569cd6; }
      .type { fill: #4ec9b0; }
      .function { fill: #dcdcaa; }
      .param { fill: #9cdcfe; }
      .comment { fill: #6a9955; }
      .number { fill: #b5cea8; }
    </style>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="#1e1e1e"/>
  
  <!-- Title -->
  <text x="400" y="28" text-anchor="middle" class="title">Genéricos Avanzados</text>
  
  <!-- Associated Types -->
  <rect x="20" y="45" width="375" height="155" rx="8" fill="#2d2d2d" stroke="#569cd6"/>
  <text x="207" y="68" text-anchor="middle" class="subtitle" style="fill:#569cd6;">Tipos Asociados</text>
  
  <text x="35" y="92" class="code">
    <tspan class="keyword">trait</tspan> <tspan class="type">Iterator</tspan> {
  </text>
  <text x="35" y="110" class="code">
        <tspan class="keyword">type</tspan> <tspan class="type">Item</tspan>;  <tspan class="comment">// tipo asociado</tspan>
  </text>
  <text x="35" y="128" class="code">
        <tspan class="keyword">fn</tspan> <tspan class="function">next</tspan>(&amp;<tspan class="keyword">mut self</tspan>) -&gt; <tspan class="type">Option</tspan>&lt;<tspan class="type">Self</tspan>::<tspan class="type">Item</tspan>&gt;;
  </text>
  <text x="35" y="146" class="code">}</text>
  
  <text x="35" y="170" class="code">
    <tspan class="keyword">impl</tspan> <tspan class="type">Iterator</tspan> <tspan class="keyword">for</tspan> <tspan class="type">Counter</tspan> {
  </text>
  <text x="35" y="188" class="code">
        <tspan class="keyword">type</tspan> <tspan class="type">Item</tspan> = <tspan class="type">u32</tspan>;  <tspan class="comment">// especifica el tipo</tspan>
  </text>
  <text x="35" y="195" class="code">    ...</text>
  
  <!-- Const Generics -->
  <rect x="405" y="45" width="375" height="155" rx="8" fill="#2d2d2d" stroke="#4ec9b0"/>
  <text x="592" y="68" text-anchor="middle" class="subtitle" style="fill:#4ec9b0;">Const Generics</text>
  
  <text x="420" y="92" class="code">
    <tspan class="comment">// N es una constante genérica</tspan>
  </text>
  <text x="420" y="112" class="code">
    <tspan class="keyword">struct</tspan> <tspan class="type">Array</tspan>&lt;<tspan class="type">T</tspan>, <tspan class="keyword">const</tspan> <tspan class="param">N</tspan>: <tspan class="type">usize</tspan>&gt; {
  </text>
  <text x="420" y="130" class="code">
        data: [<tspan class="type">T</tspan>; <tspan class="param">N</tspan>]
  </text>
  <text x="420" y="148" class="code">}</text>
  
  <text x="420" y="175" class="code">
    <tspan class="keyword">let</tspan> arr: <tspan class="type">Array</tspan>&lt;<tspan class="type">i32</tspan>, <tspan class="number">5</tspan>&gt; = ...;
  </text>
  <text x="420" y="193" class="code">
    <tspan class="keyword">let</tspan> big: <tspan class="type">Array</tspan>&lt;<tspan class="type">f64</tspan>, <tspan class="number">100</tspan>&gt; = ...;
  </text>
  
  <!-- PhantomData -->
  <rect x="20" y="210" width="375" height="145" rx="8" fill="#2d2d2d" stroke="#CE422B"/>
  <text x="207" y="233" text-anchor="middle" class="subtitle">PhantomData</text>
  
  <text x="35" y="257" class="code">
    <tspan class="keyword">use</tspan> std::marker::<tspan class="type">PhantomData</tspan>;
  </text>
  <text x="35" y="280" class="code">
    <tspan class="keyword">struct</tspan> <tspan class="type">Id</tspan>&lt;<tspan class="type">T</tspan>&gt; {
  </text>
  <text x="35" y="298" class="code">
        value: <tspan class="type">u64</tspan>,
  </text>
  <text x="35" y="316" class="code">
        _marker: <tspan class="type">PhantomData</tspan>&lt;<tspan class="type">T</tspan>&gt;,  <tspan class="comment">// "usa" T</tspan>
  </text>
  <text x="35" y="334" class="code">}</text>
  <text x="35" y="350" class="small">Marca tipo sin almacenarlo - zero-cost</text>
  
  <!-- Type State Pattern -->
  <rect x="405" y="210" width="375" height="145" rx="8" fill="#2d2d2d" stroke="#dcdcaa"/>
  <text x="592" y="233" text-anchor="middle" class="subtitle" style="fill:#dcdcaa;">Type State Pattern</text>
  
  <text x="420" y="257" class="code">
    <tspan class="keyword">struct</tspan> <tspan class="type">Locked</tspan>;   <tspan class="keyword">struct</tspan> <tspan class="type">Unlocked</tspan>;
  </text>
  <text x="420" y="280" class="code">
    <tspan class="keyword">struct</tspan> <tspan class="type">Door</tspan>&lt;<tspan class="type">State</tspan>&gt; { _s: <tspan class="type">PhantomData</tspan>&lt;<tspan class="type">State</tspan>&gt; }
  </text>
  <text x="420" y="305" class="code">
    <tspan class="keyword">impl</tspan> <tspan class="type">Door</tspan>&lt;<tspan class="type">Locked</tspan>&gt; {
  </text>
  <text x="420" y="323" class="code">
        <tspan class="keyword">fn</tspan> <tspan class="function">unlock</tspan>(<tspan class="keyword">self</tspan>) -&gt; <tspan class="type">Door</tspan>&lt;<tspan class="type">Unlocked</tspan>&gt; { ... }
  </text>
  <text x="420" y="341" class="code">}</text>
  <text x="420" y="352" class="small">Estados en tiempo de compilación</text>
  
  <!-- dyn vs Generics comparison -->
  <rect x="20" y="365" width="760" height="205" rx="8" fill="#252526" stroke="#3c3c3c"/>
  <text x="400" y="390" text-anchor="middle" class="label" style="fill:#CE422B; font-size:15px;">Genéricos vs dyn Trait (Dispatch Dinámico)</text>
  
  <!-- Static dispatch -->
  <rect x="35" y="405" width="355" height="150" rx="6" fill="#2d2d2d" stroke="#4ec9b0"/>
  <text x="212" y="425" text-anchor="middle" class="label" style="fill:#4ec9b0;">Estático (Genéricos)</text>
  
  <text x="50" y="450" class="code">
    <tspan class="keyword">fn</tspan> <tspan class="function">mostrar</tspan>&lt;<tspan class="type">T</tspan>: <tspan class="type">Display</tspan>&gt;(val: <tspan class="type">T</tspan>) {
  </text>
  <text x="50" y="468" class="code">
        <tspan class="function">println!</tspan>(<tspan class="string">"{}"</tspan>, val);
  </text>
  <text x="50" y="486" class="code">}</text>
  
  <text x="50" y="510" class="small">✓ Monomorphization - código especializado</text>
  <text x="50" y="525" class="small">✓ Inline posible - más rápido</text>
  <text x="50" y="540" class="small">✗ Binario más grande</text>
  
  <!-- Dynamic dispatch -->
  <rect x="410" y="405" width="355" height="150" rx="6" fill="#2d2d2d" stroke="#CE422B"/>
  <text x="587" y="425" text-anchor="middle" class="label" style="fill:#CE422B;">Dinámico (dyn Trait)</text>
  
  <text x="425" y="450" class="code">
    <tspan class="keyword">fn</tspan> <tspan class="function">mostrar</tspan>(val: &amp;<tspan class="keyword">dyn</tspan> <tspan class="type">Display</tspan>) {
  </text>
  <text x="425" y="468" class="code">
        <tspan class="function">println!</tspan>(<tspan class="string">"{}"</tspan>, val);
  </text>
  <text x="425" y="486" class="code">}</text>
  
  <text x="425" y="510" class="small">✓ Un solo código - binario pequeño</text>
  <text x="425" y="525" class="small">✓ Colecciones heterogéneas</text>
  <text x="425" y="540" class="small">✗ Vtable lookup - más lento</text>
</svg>
